import{d as x,f as S,u as k,x as C,h as w,G as L,c as j,k as T,_ as U,r as i,o as p,a as f,b as s,e as l,H as B,n as _,t as h,j as $,w as I,i as N}from"../index34169.js";import{e as A}from"./helpers34169.js";import{u as E,r as g,e as F}from"./index34169.js";import{L as G}from"./LogoFileni34169.js";import{s as M,h as y}from"./loader34169.js";import"./logo34169.js";const R=x({name:"LoginView",setup(){S(()=>{e.clearUser()});const e=k(),t=C(),v=w(1),n=L({email:"",password:"",terms:null}),b={password:{required:g},email:{required:g,email:F}},d=w(!1),m=E(b,n),a=j(()=>e.user),u=c=>{d.value=!0,c&&(M(),o().then(async()=>{y()}).catch(V=>{y(),A(t,V)}))},r=()=>{T.push({path:"/intro"})};async function o(){const c={email:n.email,password:n.password};await e.login(c)}return{formStep:v,formSubmitted:d,v$:m,currentUser:a,handleSubmit:u,goToIntro:r}},components:{LogoFileni:G}});const q={class:"flex justify-content-center align-items-center mt-4 sm:h-screen sm:mt-0"},z={class:"m-2 text-center sm:mt-4"},D={class:"login"},H=s("h1",{class:"mb-2 mt-0"},"Accedi al profilo",-1),O={class:"flex flex-column gap-2 field mb-0"},P=s("label",{for:"email"},"Email",-1),J={key:0,class:"p-error w-100"},K={class:"w-full flex flex-column flex-1 mt-3 mb-1"},Q={class:"flex flex-column gap-2 field mb-1"},W=s("label",{for:"email"},"Password",-1),X={key:0,class:"p-error col-5 p-0 m-0"},Y={class:"flex justify-content-between mt-2"},Z={class:"w-full flex justify-content-end text-sm cursor-pointer"},ee={class:"mt-2 text-right w-full mb-3"},se=s("div",{class:"flex align-items-center justify-content-between my-3"},[s("hr",{class:"w-full border-300 border-x-none border-top-none"}),s("div",{class:"mx-3"},"Oppure"),s("hr",{class:"w-full border-300 border-x-none border-top-none"})],-1),oe={class:"my-3 text-right w-full"};function te(e,t,v,n,b,d){const m=i("LogoFileni"),a=i("InputText"),u=i("router-link"),r=i("Button");return p(),f("div",q,[s("div",null,[s("div",z,[l(m)]),s("div",D,[H,s("form",{class:"flex flex-column",onSubmit:t[2]||(t[2]=B(o=>e.handleSubmit(!e.v$.$invalid),["prevent"]))},[s("div",O,[P,l(a,{id:"email",class:_({"p-invalid":e.v$.email.$invalid&&e.formSubmitted,"w-full":!0,"mb-1":!0}),modelValue:e.v$.email.$model,"onUpdate:modelValue":t[0]||(t[0]=o=>e.v$.email.$model=o)},null,8,["class","modelValue"]),e.formSubmitted&&e.v$.email.$errors.length>0?(p(),f("label",J,h(e.v$.email.$errors.map(o=>o.$message).join("<br />")),1)):$("",!0)]),s("div",K,[s("div",Q,[W,l(a,{id:"password",class:_({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-full":!0}),type:"password",modelValue:e.v$.password.$model,"onUpdate:modelValue":t[1]||(t[1]=o=>e.v$.password.$model=o)},null,8,["class","modelValue"]),e.formSubmitted&&e.v$.password.$errors.length>0?(p(),f("label",X,h(e.v$.password.$errors.map(o=>o.$message).join("<br />")),1)):$("",!0)]),s("div",Y,[s("div",Z,[l(u,{to:"/forgot-password",class:"underline"},{default:I(()=>[N("Recupera password")]),_:1})])])]),s("div",ee,[l(r,{type:"submit",label:"Accedi",class:"w-full mt-4"})]),se,s("div",oe,[l(r,{type:"button",label:"Cos'Ã¨ il Club dei Galli?",class:"w-full p-button-outlined",onClick:e.goToIntro},null,8,["onClick"])])],32)])])])}const me=U(R,[["render",te]]);export{me as default};
