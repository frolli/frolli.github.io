import{d as y,u as T,h as w,C as V,x as j,D as E,c as O,E as L,_ as C,r as p,o as i,a as u,e as _,w as x,b as e,t as d,f as B,j as U,F as k,l as M,y as N,i as R}from"../index34169.js";import{s as A,h as g}from"./loader34169.js";import{s as I,e as P}from"./helpers34169.js";const S=y({name:"UserDataView",setup(){const s=T(),t=w(!1),l=V(),r=j(),f=E(()=>L(()=>import("./EmailDialog34169.js"),["assets/EmailDialog34169.js","assets/helpers34169.js","assets/loader34169.js","index34169.js","assets/index34169.css","assets/EmailDialog34169.css"])),b=E(()=>L(()=>import("./PwdDialog34169.js"),["assets/PwdDialog34169.js","assets/helpers34169.js","assets/loader34169.js","index34169.js","assets/index34169.css","assets/EmailDialog34169.css"])),a=w(),o=w(),n=O(()=>s.currentUser),h=()=>{l.open(f,{props:{header:"Modifica",style:{width:"30vw"},breakpoints:{"960px":"75vw","640px":"90vw"},modal:!0},onClose:c=>{if(!c.data.buttonType&&n.value){const m={user_id:n.value.id,user:c.data};D(m)}}})},v=()=>{l.open(b,{props:{header:"Modifica",style:{width:"30vw"},breakpoints:{"960px":"75vw","640px":"90vw"},modal:!0},data:{password:a,confirm_password:o},onClose:c=>{if(!c.data.buttonType&&n.value){const m={id:n.value.id,user:c.data};$(m)}}})},$=async function(c){A(),await s.changePassword(c).then(async()=>{g(),I(r,{message:"Password aggiornata con successo",error:!1})}).catch(m=>{g(),P(r,m)})},D=async function(c){A(),await s.updateUser(c).then(async()=>{g(),I(r,{message:"Email aggiornata con successo",error:!1})}).catch(m=>{g(),P(r,m)})};return{visible:t,currentUser:n,showDialogEmail:h,showDialogPwd:v}}}),F=e("h2",{class:"mb-3"},"I tuoi dati",-1),G={class:"pb-2 border-bottom-1 border-600"},z=e("p",{class:"font-wedium text-400"},"Nome referente",-1),q={class:"mb-1"},H={class:"pb-2 border-bottom-1 border-600"},J=e("p",{class:"font-wedium text-400"},"Cognome referente",-1),K={class:"mb-1"},Q={class:"pb-2 border-bottom-1 border-600"},W=e("p",{class:"font-wedium text-400"},"Numero di telefono",-1),X={class:"mb-1"},Y={class:"pb-2 border-bottom-1 border-600"},Z=e("p",{class:"font-wedium text-400"},"Email",-1),ee={class:"flex align-items-center justify-content-between mb-1"},se={class:"m-0"},te={class:"pb-2"},oe=e("p",{class:"font-wedium text-400"},"Password",-1),ne={class:"flex align-items-center justify-content-between mb-1"},re=e("p",{class:"m-0"},"****************",-1);function ae(s,t,l,r,f,b){const a=p("DynamicDialog"),o=p("Card");return i(),u("div",null,[F,_(o,null,{content:x(()=>{var n,h,v,$;return[e("div",G,[z,e("p",q,d(((n=s.currentUser)==null?void 0:n.first_name)||"-"),1)]),e("div",H,[J,e("p",K,d(((h=s.currentUser)==null?void 0:h.last_name)||"-"),1)]),e("div",Q,[W,e("p",X,d(((v=s.currentUser)==null?void 0:v.phone)||"-"),1)]),e("div",Y,[Z,e("div",ee,[e("p",se,d((($=s.currentUser)==null?void 0:$.email)||"-"),1),e("p",{class:"m-0 underline cursor-pointer text-primary",onClick:t[0]||(t[0]=D=>s.showDialogEmail())}," Modifica ")])]),e("div",te,[oe,e("div",ne,[re,e("p",{class:"m-0 underline cursor-pointer text-primary",onClick:t[1]||(t[1]=D=>s.showDialogPwd())}," Modifica ")])]),_(a)]}),_:1})])}const ce=C(S,[["render",ae]]),ie=y({setup(){const s="https://api.clubdeigalli.it",t=s+"/Informativa-aderenti-Club-dei-Galli.pdf",l=s+"/ACCORDO-COMMERCIALE-CLUB-DEI-GALLI-2023.pdf";return{openContract:function(){window.open(l,"_blank")},openTerms:function(){window.open(t,"_blank")}}}}),de=e("h2",{class:"mb-3"},"I tuoi documenti",-1),le=e("p",{class:"font-wedium"},"Accordo commerciale",-1),ue=e("div",{class:"circle flex align-items-center justify-content-center"},[e("i",{class:"pi download-icon"})],-1),pe=[le,ue],me=e("p",{class:"font-wedium"},"Informativa privacy",-1),_e=e("div",{class:"circle flex align-items-center justify-content-center"},[e("i",{class:"pi download-icon"})],-1),fe=[me,_e];function he(s,t,l,r,f,b){const a=p("Card");return i(),u("div",null,[de,_(a,{class:"documents"},{content:x(()=>[e("div",{class:"flex align-items-center justify-content-between pb-2 border-bottom-1 border-600 cursor-pointer",onClick:t[0]||(t[0]=o=>s.openContract())},pe),e("div",{class:"flex align-items-center justify-content-between pt-2 cursor-pointer",onClick:t[1]||(t[1]=o=>s.openTerms())},fe)]),_:1})])}const be=C(ie,[["render",he]]),we=y({setup(){B(()=>{s.me()});const s=T();return{user:O(()=>s.currentUser)}}});const ve={key:0,class:"mb-3"},$e={key:1,class:"flex align-items-center gap-4 flex-wrap"},ge={class:"relative address"},ye={class:"pt-2 pb-3 border-bottom-1 border-600 font-semibold"},Ce={key:0};function De(s,t,l,r,f,b){const a=p("Card");return i(),u(k,null,[s.user&&s.user.stores&&s.user.stores.length>0?(i(),u("h2",ve,"I miei punti vendita")):U("",!0),s.user&&s.user.stores&&s.user.stores.length>0?(i(),u("div",$e,[(i(!0),u(k,null,M(s.user.stores,o=>(i(),N(a,{key:o.id},{content:x(()=>[e("div",ge,[e("div",ye,d(o.name),1),e("p",null,[R(d(o.address)+" "+d(o.zipcode)+" "+d(o.city)+" ",1),o.province?(i(),u("span",Ce,"("+d(o.province)+")",1)):U("",!0)])])]),_:2},1024))),128))])):U("",!0)],64)}const Ue=C(we,[["render",De]]),ke=y({name:"UserAreaView",setup(){const s=w({icon:"pi pi-home",to:"/"}),t=w([{label:"Area personale"}]);return{home:s,items:t}},components:{UserData:ce,UserDocuments:be,OutletList:Ue}}),xe={class:"flex justify-content-between gap-2 flex-wrap md:flex-nowrap"},Ee={class:"col-12 md:col-6"},Le={class:"col-12 md:col-6"},Ae={class:"w-full mt-3 pl-2"};function Ie(s,t,l,r,f,b){const a=p("Breadcrumb"),o=p("UserData"),n=p("UserDocuments"),h=p("OutletList");return i(),u(k,null,[_(a,{home:s.home,model:s.items,class:"m-0 p-0"},null,8,["home","model"]),e("div",xe,[e("div",Ee,[_(o)]),e("div",Le,[_(n)])]),e("div",Ae,[_(h)])],64)}const Ve=C(ke,[["render",Ie]]);export{Ve as default};
