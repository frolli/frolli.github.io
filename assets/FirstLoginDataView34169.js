import{d as U,f as j,u as I,x as L,h as y,G as B,c as N,k as A,_ as D,r as h,o as a,a as r,b as s,H as T,e as i,n,t as m,j as d,i as w}from"../index34169.js";import{s as x,e as z}from"./helpers34169.js";import{u as E,r as u}from"./index34169.js";import{s as M,h as V}from"./loader34169.js";import{_ as G}from"./logo34169.js";const O=U({name:"ChangePwdView",setup(){j(()=>{});const e=I(),t=L(),$=y(1),f="https://api.clubdeigalli.it",b=f+"/Informativa-aderenti-Club-dei-Galli.pdf",_=f+"/ACCORDO-COMMERCIALE-CLUB-DEI-GALLI-2023.pdf",l=B({first_name:"",last_name:"",phone:"",terms:"",privacy:""}),c={first_name:{required:u},last_name:{required:u},phone:{required:u},terms:{required:u},privacy:{required:u}},p=y(!1),o=E(c,l),g=N(()=>e.user),S=v=>{p.value=!0,v&&(M(),C().then(async()=>{x(t,{message:"Dati memorizzati correttamente",error:!1}),V(),A.push({path:"/login"})}).catch(k=>{V(),z(t,k)}))};async function C(){const v={user_id:g.value.id,user:{first_name:l.first_name,last_name:l.last_name,phone:l.phone,privacy:!0,contract:!0}};await e.updateUser(v)}return{formStep:$,formSubmitted:p,v$:o,base_url:f,informativa:b,accordo:_,currentUser:g,handleSubmit:S}},components:{}}),R={class:"flex justify-content-center align-items-center h-screen"},H={class:"p-3",style:{"max-width":"430px"}},q=s("div",{class:"m-2 text-center sm:mt-4"},[s("img",{src:G,alt:"logo"})],-1),F=s("h1",{class:"text-center mb-2"},"Inserisci i tuoi dati",-1),P=s("p",{class:"font-normal mb-4"}," Compila il form, assicurandoti di inserire i dati corretti. ",-1),J={class:"flex flex-column gap-2 field mb-0"},K=s("label",{for:"first_name"},"Nome referente*",-1),Q={key:0,class:"p-error w-100"},W={class:"w-full flex flex-column flex-1 mt-3 mb-1"},X={class:"flex flex-column gap-2 field mb-0"},Y=s("label",{for:"last_name"},"Cognome referente*",-1),Z={key:0,class:"p-error col-5 p-0 m-0 w-full"},ee={class:"w-full flex flex-column flex-1 mt-3 mb-1"},se={class:"flex flex-column gap-2 field mb-0"},oe=s("label",{for:"phone"},"Numero di telefono*",-1),te={key:0,class:"p-error col-5 p-0 m-0 w-full"},le={class:"w-full flex flex-column flex-1 mt-3 mb-1"},ae={class:"flex align-items-center field mb-0 gap-2"},re={for:"chbx",class:"line-height-2"},ie=["href"],ne={key:0,class:"p-error col-5 p-0 m-0 w-full"},me={class:"w-full flex flex-column flex-1 mt-3 mb-1"},de={class:"flex align-items-center field mb-0 gap-2"},ue={for:"chbx",class:"line-height-2"},fe=["href"],ce={key:0,class:"p-error col-5 p-0 m-0 w-full"},pe={class:"mt-2 text-right w-full mb-3"};function ve(e,t,$,f,b,_){const l=h("InputText"),c=h("Checkbox"),p=h("Button");return a(),r("div",R,[s("div",H,[q,s("div",null,[F,P,s("form",{class:"mt-4 flex flex-column",onSubmit:t[5]||(t[5]=T(o=>e.handleSubmit(!e.v$.$invalid),["prevent"]))},[s("div",J,[K,i(l,{id:"first_name",class:n({"p-invalid":e.v$.first_name.$invalid&&e.formSubmitted,"w-full":!0}),modelValue:e.v$.first_name.$model,"onUpdate:modelValue":t[0]||(t[0]=o=>e.v$.first_name.$model=o)},null,8,["class","modelValue"]),e.formSubmitted&&e.v$.first_name.$errors.length>0?(a(),r("label",Q,m(e.v$.first_name.$errors.map(o=>o.$message).join("<br />")),1)):d("",!0)]),s("div",W,[s("div",X,[Y,i(l,{id:"last_name",class:n({"p-invalid":e.v$.last_name.$invalid&&e.formSubmitted,"w-full":!0}),modelValue:e.v$.last_name.$model,"onUpdate:modelValue":t[1]||(t[1]=o=>e.v$.last_name.$model=o)},null,8,["class","modelValue"]),e.formSubmitted&&e.v$.last_name.$errors.length>0?(a(),r("label",Z,m(e.v$.last_name.$errors.map(o=>o.$message).join("<br />")),1)):d("",!0)])]),s("div",ee,[s("div",se,[oe,i(l,{id:"phone",class:n({"p-invalid":e.v$.phone.$invalid&&e.formSubmitted,"w-full":!0}),modelValue:e.v$.phone.$model,"onUpdate:modelValue":t[2]||(t[2]=o=>e.v$.phone.$model=o)},null,8,["class","modelValue"]),e.formSubmitted&&e.v$.phone.$errors.length>0?(a(),r("label",te,m(e.v$.phone.$errors.map(o=>o.$message).join("<br />")),1)):d("",!0)])]),s("div",le,[s("div",ae,[i(c,{id:"chbx",modelValue:e.v$.privacy.$model,"onUpdate:modelValue":t[3]||(t[3]=o=>e.v$.privacy.$model=o),class:n({"p-invalid":e.v$.privacy.$invalid&&e.formSubmitted}),binary:"","aria-describedby":"chbx-error"},null,8,["modelValue","class"]),s("label",re,[w("Ho preso visione dellâ€™"),s("a",{href:e.informativa},"informativa sul trattamento dei dati personali",8,ie)]),e.formSubmitted&&e.v$.privacy.$errors.length>0?(a(),r("label",ne,m(e.v$.privacy.$errors.map(o=>o.$message).join("<br />")),1)):d("",!0)])]),s("div",me,[s("div",de,[i(c,{id:"chbx",modelValue:e.v$.terms.$model,"onUpdate:modelValue":t[4]||(t[4]=o=>e.v$.terms.$model=o),class:n({"p-invalid":e.v$.terms.$invalid&&e.formSubmitted}),binary:"","aria-describedby":"chbx-error"},null,8,["modelValue","class"]),s("label",ue,[w("Accetto l'"),s("a",{href:e.accordo},"accordo commerciale",8,fe)]),e.formSubmitted&&e.v$.terms.$errors.length>0?(a(),r("label",ce,m(e.v$.terms.$errors.map(o=>o.$message).join("<br />")),1)):d("",!0)])]),s("div",pe,[i(p,{type:"submit",label:"Conferma",class:"w-full mt-4 capitalize"})])],32)])])])}const ye=D(O,[["render",ve]]);export{ye as default};
